# Enable WCHAR in the toolchain (needed by alsa)
BR2_TOOLCHAIN_BUILDROOT_WCHAR=y
BR2_USE_WCHAR=y

# Enable mdev (needed for connect/disconnect events)
BR2_ROOTFS_DEVICE_CREATION_DYNAMIC_MDEV=y
BR2_PACKAGE_MDEVD=y

# "UI"
BR2_TARGET_GENERIC_ROOT_PASSWD="toor"
BR2_TARGET_GENERIC_HOSTNAME="$PROGRAM"
BR2_TARGET_GENERIC_ISSUE="Welcome to $FRIENDLY"

# DBus + Python + GObject (needed by agent)
BR2_PACKAGE_DBUS=y
BR2_PACKAGE_DBUS_GLIB=y
BR2_PACKAGE_DBUS_PYTHON=y
BR2_PACKAGE_PYTHON=y
BR2_PACKAGE_PYTHON_GOBJECT=y

# ALSA
BR2_PACKAGE_ALSA_LIB=y
BR2_PACKAGE_ALSA_UTILS=y
BR2_PACKAGE_ALSA_UTILS_APLAY=y
BR2_PACKAGE_ALSA_UTILS_SPEAKER_TEST=y

# BlueZ
BR2_PACKAGE_BLUEZ_ALSA=y
BR2_PACKAGE_BLUEZ_TOOLS=y
BR2_PACKAGE_BLUEZ5_UTILS=y
BR2_PACKAGE_BLUEZ5_UTILS_CLIENT=y
BR2_PACKAGE_BLUEZ5_UTILS_DEPRECATED=y

# set custom kernel config (must be done after make linux-extract to copy source config from linux source tree)
BR2_LINUX_KERNEL_USE_DEFCONFIG=n
BR2_LINUX_KERNEL_USE_CUSTOM_CONFIG=y
BR2_LINUX_KERNEL_CUSTOM_CONFIG_FILE="$LINUX_CONFIG"

# set custom busybox config (must be done after make busboxy-extract to copy source config from package source)
BR2_PACKAGE_BUSYBOX_CONFIG="$BUSYBOX_CONFIG"

# enable DT overlay support (needed for dynamic dac loading support) <-- TODO mgb: this may not be necessary???
BR2_LINUX_KERNEL_DTB_OVERLAY_SUPPORT=y
BR2_PACKAGE_RPI_FIRMWARE_INSTALL_DTB_OVERLAYS=y

# rootfs tweaks
BR2_ROOTFS_OVERLAY="$PROGRAM_DIR/rootfs_overlay"
BR2_ROOTFS_POST_BUILD_SCRIPT="$PROGRAM_DIR/post-build.sh"
BR2_ROOTFS_POST_IMAGE_SCRIPT="$PROGRAM_DIR/post-image.sh $PROGRAM_DIR/rpi-post-image.sh"
BR2_ROOTFS_POST_SCRIPT_ARGS="$BTZ_ROOTFS_POST_SCRIPT_ARGS"

BR2_SYSTEM_DHCP="eth0"
BR2_PACKAGE_DROPBEAR=y
BR2_PACKAGE_DROPBEAR_CLIENT=n
BR2_PACKAGE_DROPBEAR_DISABLE_REVERSE=y
BR2_PACKAGE_DROPBEAR_SMALL=y
